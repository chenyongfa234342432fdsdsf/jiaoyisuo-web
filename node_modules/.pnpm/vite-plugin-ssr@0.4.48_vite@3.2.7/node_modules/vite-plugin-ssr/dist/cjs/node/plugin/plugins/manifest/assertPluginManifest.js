"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.assertPluginManifest = void 0;
const assertBase_1 = require("../../../globalContext/runtimeConfig/assertBase");
const utils_1 = require("../../utils");
function assertPluginManifest(pluginManifest) {
    (0, utils_1.assert)((0, utils_1.isPlainObject)(pluginManifest));
    (0, utils_1.assert)(typeof pluginManifest.baseUrl === 'string');
    (0, assertBase_1.assertBaseUrlValue)(pluginManifest.baseUrl);
    (0, utils_1.assert)(typeof pluginManifest.usesClientRouter === 'boolean');
    (0, utils_1.assert)(typeof pluginManifest.version === 'string');
    (0, utils_1.assert)(typeof pluginManifest.includeAssetsImportedByServer === 'boolean');
    (0, utils_1.assert)(pluginManifest.baseAssets === null ||
        (typeof pluginManifest.baseAssets === 'string' && pluginManifest.baseAssets.startsWith('http')));
    (0, utils_1.assertUsage)(pluginManifest.version === utils_1.projectInfo.projectVersion, `You need to re-build your app (\`$ vite build\`). (Because you are using \`vite-plugin-ssr@${utils_1.projectInfo.projectVersion}\` while your build has been generated with a different version \`vite-plugin-ssr@${pluginManifest.version}\`.)`);
}
exports.assertPluginManifest = assertPluginManifest;
