"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.viteAlreadyLoggedError = exports.viteErrorCleanup = void 0;
const globalContext_1 = require("./globalContext");
const utils_1 = require("./utils");
function viteErrorCleanup(err) {
    const viteDevServer = (0, globalContext_1.getViteDevServer)();
    if (!viteDevServer) {
        return;
    }
    if ((0, utils_1.hasProp)(err, 'stack')) {
        // Apply source maps
        viteDevServer.ssrFixStacktrace(err);
    }
}
exports.viteErrorCleanup = viteErrorCleanup;
function viteAlreadyLoggedError(err) {
    const viteDevServer = (0, globalContext_1.getViteDevServer)();
    if (!viteDevServer) {
        return false;
    }
    return viteDevServer.config.logger.hasErrorLogged(err);
}
exports.viteAlreadyLoggedError = viteAlreadyLoggedError;
